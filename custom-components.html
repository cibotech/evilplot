<!DOCTYPE html><html><head><title>EvilPlot: Custom Components</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="CiBO Technologies" /><meta name="description" content="Combinators for graphics" /><meta name="og:image" content="/evilplot/img/poster.png" /><meta name="image" property="og:image" content="/evilplot/img/poster.png" /><meta name="og:title" content="EvilPlot: Custom Components" /><meta name="title" property="og:title" content="EvilPlot: Custom Components" /><meta name="og:site_name" content="EvilPlot" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="Combinators for graphics" /><link rel="icon" type="image/png" href="/evilplot/img/favicon.png" /><meta name="twitter:title" content="EvilPlot: Custom Components" /><meta name="twitter:image" content="/evilplot/img/poster.png" /><meta name="twitter:description" content="Combinators for graphics" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/evilplot/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/evilplot/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/evilplot/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/evilplot/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/evilplot/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/evilplot/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/evilplot/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/evilplot/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/evilplot/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/evilplot/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/evilplot/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/evilplot/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/evilplot/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/evilplot/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/evilplot/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/evilplot/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/evilplot/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/evilplot/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/evilplot/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/evilplot/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/evilplot/highlight/styles/vs.css" /><link rel="stylesheet" href="/evilplot/css/pattern-style.css" /><link rel="stylesheet" href="/evilplot/css/custom.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/evilplot/" class="brand"><div class="brand-wrapper"><span>EvilPlot</span></div></a></li> <li><a href="/evilplot/" class="">Home</a></li> <li><a href="/evilplot/index.html" class=""></a></li> <li><a href="/evilplot/getting-started.html" class="">Getting Started</a></li> <li><a href="/evilplot/plots.html" class="">Plotting</a></li> <li><a href="/evilplot/drawing-api.html" class="">Drawing API</a></li> <li><a href="/evilplot/custom-renderers.html" class="">Custom Renderers</a></li> <li><a href="/evilplot/custom-components.html" class=" active ">Custom Components</a></li> <li><a href="/evilplot/colors.html" class="">Colors</a></li> <li><a href="/evilplot/render-context.html" class="">Render Contexts</a></li> <li><a href="/evilplot/plot-catalog.html" class="">Plot Catalog</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav hidden-xs hidden-sm"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/cibotech/evilplot" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/cibotech/evilplot" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="cibotech" data-github-repo="evilplot"><div class="content-wrapper"><section><h1 id="custom-components">Custom Components</h1>

<p>Many of the plots in the documentation apply fluent methods to a plot before rendering, for example:</p>

<div class="row">
<div class="col-md-6">
    <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">com.cibo.evilplot.plot._</span>
<span class="k">import</span> <span class="nn">com.cibo.evilplot.numeric.Point</span>

<span class="nc">LinePlot</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="nc">Point</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">3</span><span class="o">)))</span>
  <span class="o">.</span><span class="py">xAxis</span><span class="o">().</span><span class="py">yAxis</span><span class="o">()</span>
  <span class="o">.</span><span class="py">xGrid</span><span class="o">().</span><span class="py">yGrid</span><span class="o">()</span>
  <span class="o">.</span><span class="py">hline</span><span class="o">(</span><span class="mf">2d</span><span class="o">)</span>
  <span class="o">.</span><span class="py">title</span><span class="o">(</span><span class="s">"An example plot"</span><span class="o">)</span>
  <span class="o">.</span><span class="py">render</span><span class="o">()</span>
</code></pre></div>    </div>
  </div>
<div class="col-md-6">
<img src="/evilplot/img/docs/custom-components/base.png" class="img-responsive" />
</div>
</div>

<p>In this plot, <code class="highlighter-rouge">xAxis</code>, <code class="highlighter-rouge">yAxis</code>, <code class="highlighter-rouge">xGrid</code>, <code class="highlighter-rouge">yGrid</code>, <code class="highlighter-rouge">hline</code>, and <code class="highlighter-rouge">title</code>, all add plot components to the plot. You can
see the javadoc for all the built-in components
<a href="/evilplot/scaladoc/jvm/com/cibo/evilplot/plot/components/index.html">here</a> by filtering for the “Implicits” traits.</p>

<h3 id="building-a-custom-component">Building a Custom Component</h3>

<p>You can build your own components by extending <code class="highlighter-rouge">plot.compoments.PlotComponent</code>.
They are added to a plot using the plot’s <code class="highlighter-rouge">component</code> method.</p>

<p>Every <code class="highlighter-rouge">PlotComponent</code> instance has a <code class="highlighter-rouge">Position</code> indicating how it should be rendered relative to the plot.</p>
<dl>
<dt>Position.Overlay</dt>
<dd>The component occupies the same space as the plot and is rendered in front of it.</dd>
<dt>Position.Background</dt>
<dd>Background is similar to Overlay but is rendered behind the plot.</dd>
<dt>Position.Left, Position.Top, Position.Right, Position.Bottom</dt>
<dd>
Components with these positions are rendered outside of the plot space and placed next to the left, top, right, or
bottom edge of the plot.
Each component added at a position will be rendered outside previous components at that position (further from the plot).
You can see this in the plot below where three Label components are added, all at Position.Top.
</dd>
</dl>

<div class="row">
<div class="col-md-6">
    <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">LinePlot</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="nc">Point</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">3</span><span class="o">)))</span>
  <span class="o">.</span><span class="py">xAxis</span><span class="o">().</span><span class="py">yAxis</span><span class="o">()</span>
  <span class="o">.</span><span class="py">xGrid</span><span class="o">().</span><span class="py">yGrid</span><span class="o">()</span>
  <span class="o">.</span><span class="py">hline</span><span class="o">(</span><span class="mf">2d</span><span class="o">)</span>
  <span class="o">.</span><span class="py">topLabel</span><span class="o">(</span><span class="s">"First Label"</span><span class="o">)</span>
  <span class="o">.</span><span class="py">topLabel</span><span class="o">(</span><span class="s">"Second Label"</span><span class="o">)</span>
  <span class="o">.</span><span class="py">topLabel</span><span class="o">(</span><span class="s">"Third Label"</span><span class="o">)</span>
  <span class="o">.</span><span class="py">render</span><span class="o">()</span>
</code></pre></div>    </div>
  </div>
<div class="col-md-6">
<img src="/evilplot/img/docs/custom-components/multi_label.png" class="img-responsive" />
</div>
</div>

<p>Here’s a sample custom component that adds a marker to the right side of our example plot.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">com.cibo.evilplot.geometry.</span><span class="o">{</span><span class="nc">Align</span><span class="o">,</span> <span class="nc">Drawable</span><span class="o">,</span> <span class="nc">Extent</span><span class="o">,</span> <span class="nc">Polygon</span><span class="o">,</span> <span class="nc">Text</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">com.cibo.evilplot.plot.aesthetics.Theme</span>
<span class="k">import</span> <span class="nn">com.cibo.evilplot.plot.components.</span><span class="o">{</span><span class="nc">PlotComponent</span><span class="o">,</span> <span class="nc">Position</span><span class="o">}</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">RightSideMarker</span><span class="o">(</span>
  <span class="n">msg</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span>
  <span class="n">value</span><span class="k">:</span> <span class="kt">Double</span>
<span class="o">)</span> <span class="k">extends</span> <span class="nc">PlotComponent</span> <span class="o">{</span>
  <span class="k">val</span> <span class="nv">position</span> <span class="k">=</span> <span class="nv">Position</span><span class="o">.</span><span class="py">Right</span>

  <span class="k">private</span> <span class="k">val</span> <span class="nv">triangle</span><span class="k">:</span> <span class="kt">Drawable</span> <span class="o">=</span> <span class="nc">Polygon</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="nc">Point</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">)))</span>
  <span class="k">private</span> <span class="k">val</span> <span class="nv">marker</span><span class="k">:</span> <span class="kt">Drawable</span> <span class="o">=</span> <span class="nv">Align</span><span class="o">.</span><span class="py">middle</span><span class="o">(</span>
    <span class="nv">triangle</span><span class="o">.</span><span class="py">rotated</span><span class="o">(</span><span class="mi">90</span><span class="o">),</span>
    <span class="nc">Text</span><span class="o">(</span><span class="n">msg</span><span class="o">).</span><span class="py">padAll</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
  <span class="o">).</span><span class="py">reduce</span><span class="o">(</span><span class="n">beside</span><span class="o">)</span>

  <span class="k">override</span> <span class="k">def</span> <span class="nf">size</span><span class="o">(</span><span class="n">plot</span><span class="k">:</span> <span class="kt">Plot</span><span class="o">)</span><span class="k">:</span> <span class="kt">Extent</span> <span class="o">=</span> <span class="nv">marker</span><span class="o">.</span><span class="py">extent</span>

  <span class="k">def</span> <span class="nf">render</span><span class="o">(</span><span class="n">plot</span><span class="k">:</span> <span class="kt">Plot</span><span class="o">,</span> <span class="n">extent</span><span class="k">:</span> <span class="kt">Extent</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">theme</span><span class="k">:</span> <span class="kt">Theme</span><span class="o">)</span><span class="k">:</span> <span class="kt">Drawable</span> <span class="o">=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="nv">yoffset</span> <span class="k">=</span> <span class="nv">plot</span><span class="o">.</span><span class="py">ytransform</span><span class="o">(</span><span class="n">plot</span><span class="o">,</span> <span class="n">extent</span><span class="o">)(</span><span class="n">value</span><span class="o">)</span> <span class="o">-</span> <span class="o">(</span><span class="nv">marker</span><span class="o">.</span><span class="py">extent</span><span class="o">.</span><span class="py">height</span> <span class="o">/</span> <span class="mi">2</span><span class="o">)</span>
    <span class="nv">marker</span><span class="o">.</span><span class="py">translate</span><span class="o">(</span><span class="n">y</span> <span class="k">=</span> <span class="n">yoffset</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="row">
<div class="col-md-6">
    <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">LinePlot</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="nc">Point</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">3</span><span class="o">)))</span>
  <span class="o">.</span><span class="py">xAxis</span><span class="o">().</span><span class="py">yAxis</span><span class="o">()</span>
  <span class="o">.</span><span class="py">xGrid</span><span class="o">().</span><span class="py">yGrid</span><span class="o">()</span>
  <span class="o">.</span><span class="py">hline</span><span class="o">(</span><span class="mf">2d</span><span class="o">)</span>
  <span class="o">.</span><span class="py">title</span><span class="o">(</span><span class="s">"An example plot"</span><span class="o">)</span>
  <span class="o">.</span><span class="py">component</span><span class="o">(</span><span class="nc">RightSideMarker</span><span class="o">(</span><span class="s">"marker at 2"</span><span class="o">,</span> <span class="mi">2</span><span class="o">))</span>
  <span class="o">.</span><span class="py">render</span><span class="o">()</span>
</code></pre></div>    </div>
  </div>
<div class="col-md-6">
<img src="/evilplot/img/docs/custom-components/with_marker.png" class="img-responsive" />
</div>
</div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/evilplot/highlight/highlight.pack.js"></script><script src="/evilplot/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="/evilplot/js/search.js"></script><script src="/evilplot/js/main.js"></script></body></html>